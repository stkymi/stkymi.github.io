---
layout : post
tags : share
premalink: pretty
---
### 有了VPS可以干什么###

前几天买了Digitalocean家的一台VPS，新加坡的最快，尽管很多人说旧金山的稳定。

买VPS的初衷是用来翻墙，搭建一个VPN什么的，因为我也不知道有了VPS可以干嘛，除了翻墙。

我电脑一直用着Goagent，php代理，香港的一台主机，当然，这也得多亏了coding团队的奉献，我也是借着人家的付出才翻得墙，虽然我知道他们不允许搭建代理应用--。不道德吧，有点儿。

手机原来用的是别人的shadowsocks，但是不知道为什么，那位好心人又把服务器关了，所以我借用的shadowsocks也不能用了，无奈之下才要买VPS，当然，只花了$5，因为github对教育的优惠。

https://www.digitalocean.com/?refcode=642012c0a066

[这个](https://www.digitalocean.com/?refcode=642012c0a066)是我的邀请链接，通过这个邀请链接注册之后，你会有十美元到账。之后就是通过paypal充5美元进去，这里需要用到绑定银行卡，然后账户里就有十五美元了～至少能用三个月呢～三十块钱，三个月的VPS，还是蛮划算的～

然后我就来总结一下我搭建完这台VPS的经验吧。（顺便说一句，百度真是越来越垃圾了，出了搜索广告很牛逼，别的，真是不敢恭维。）

<a>学东西去官网，问问题去社区。这是我最到的收获之一。</a>


## Login##
新建了VPS，第一步当然是要登陆，可是问题来了，怎么登陆？

Option 1. 密码

你可以用digitalocean自带的发送一封密码邮件到你的邮箱里，接收root的密码。然后用ssh登陆：<code>ssh root@your_vps_ip</code> 然后输入密码就可以了。进入之后更改密码。

Option 2. 密钥

SSH Key是专用的名词，我翻译成密钥请不要打我。

现在本地生成一对密钥，把 key.pub 粘贴到Digitalocean上，然后用你的私钥连接。
[Details](https://www.digitalocean.com/community/tutorials/how-to-use-ssh-keys-with-digitalocean-droplets)
妈蛋人家说的实在是太详细了，就连锁定SSH Key访问都说了。我就不在这里罗嗦了。一步一步来，总没有错的。

进入了VPS之后，你得到的就是一个黑框，当然，也可以是绿的。

命令行操作，不多说。

先更新软件：
<code>apt-get update && apt-get upgrade</code>

然后就可以安装你想安装的东西了。


## Shadowsocks##
安装shadowsocks的话，还是得看官方教程：[Click me](https://shadowsocks.com/download.html)

系统没有安装pip，要先自己安一下<code>apt-get install pip</code>

然后我建议是在<code>/opt</code>目录下安装各种东西，给每一个软件mkdir一个文件夹，相关的文件全都放进去，查找的时候也好找。

总之，不会的就去google，记得要用英文搜索。

最重要的一点是开机启动的问题，我试了很多方法单就是不成功，不管是放在<code>/etc/rc.local</code>还是在<code>/etc/init.d/</code>里面，都不能够成功的开机启动，可能是我的脚本有问题吧。影响也不大，服务器又不是经常开机～


## 安装VPN##

我尝试过安装OpenVpn,从互联网的某个角落找到了一个一键安装的脚本，但是苦于不会弄，失败了。
我相信聪明的你一定会成功的。

然后我就尝试了PPTP，详细的链接在[这里](https://www.digitalocean.com/community/tutorials/how-to-setup-your-own-vpn-with-pptp)，很详细了。那里面的第五步之后的全是客户端的配置，其实我们不用管，因为有图形化界面，自己添加一个VPN就好了，IP地址，用户名，密码。很感谢那些写教程的人。谢谢。

## Nginx或者Apache##
既然是服务器那就少不了这两个大神，选择一个，然后安上，或者全部都要，但一定要记得更改默认端口，因为只能有一个开启80端口，另一个请改成8080或者其他的。这样才不会产生冲突。当然，如果你不做反代理什么的，没必要开俩。

具体的安装步骤很简单，我不罗嗦。就是在配置的时候会有些麻烦，不过，既然我们有搜索引擎，那他们就该发挥他们的作用。搜一下，你会找到答案的。

这里我要说的是，虚拟主机。

以前我也不知道那些虚拟主机是怎么搞的，windows下的好理解，开端口或者图形化处理，都是很简单，那么linux下的要怎么弄？其实也很简单，无非就是在配置文件里添加一个name而已，在<code>/etc/nginx/sites-enabled/</code>里面，放着的是已经启用的网站，一般这里面的文件全是<code>/etc/nginx/sites-available</code>里面的软连接。

在里面放一个文件，比如，virtualhost：
<pre>
server {
	listen 80;

	root /var/www/virtualhost/html;
	index index.html index.htm;

	server_name yourdomain.com www.yourdomain.com; #这里的yourdomain.com就是你要解析到这台服务器上的地址，你在domain管理里面将网址A记录解析到这台服务器的IP就Ok了。
	}
}
</pre>

关于那些php的配置，不在这里累赘。我把配置贴出来，照着葫芦画瓢吧～

    server {
        listen 80;

        root /var/www/kfd.me/index;
        index index.php index.html index.htm;

        access_log /var/www/kfd.me/log/kfd.me.access.log;

        server_name kfd.me www.kfd.me;
    #   rewrite     ^   https://$server_name$request_uri? permanent;

        error_page 404 /404.html;

        error_page 500 502 503 504 /50x.html;
        location = /50x.html {
            root /usr/share/nginx/html;
        }

        location ~ \.php$ {
            fastcgi_split_path_info ^(.+\.php)(/.+)$;
        #   # NOTE: You should have "cgi.fix_pathinfo = 0;" in php.ini
            fastcgi_pass unix:/var/run/php5-fpm.sock;
            try_files $uri =404;
            fastcgi_index index.php;
            include fastcgi_params;
        }

        # deny access to .htaccess files, if Apache's document root
        # concurs with nginx's one
        #
        location ~ /\.ht {
            deny all;
        }
    }


    # HTTPS server
    #
    server {
        listen 443;
        server_name kfd.me www.kfd.me;
        root /var/www/kfd.me/index;
        index index.php index.html index.htm;
    #
        ssl on;
        ssl_certificate /etc/ssl/private/kfd_me.crt;
        ssl_certificate_key /etc/ssl/private/kfd_me.key;
    #
        ssl_session_timeout 5m;
    #
        ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2;
        ssl_ciphers "HIGH:!aNULL:!MD5 or HIGH:!aNULL:!MD5:!3DES";
        ssl_prefer_server_ciphers on;
    #
        location / {
            try_files $uri $uri/ =404;
        }

        error_page 404 /404.html;

        error_page 500 502 503 504 /50x.html;
        location = /50x.html {
            root /usr/share/nginx/html;
        }

        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
        #
        location ~ \.php$ {
            fastcgi_split_path_info ^(.+\.php)(/.+)$;
            fastcgi_pass unix:/var/run/php5-fpm.sock;
            try_files $uri =404;
            fastcgi_index index.php;
            include fastcgi_params;
        }

        # deny access to .htaccess files, if Apache's document root
        # concurs with nginx's one
        #
        location ~ /\.ht {
            deny all;
        }

    }




## 搭建私有云##
今天刚看到的，自己搭一个私有云～相当给力～再也不用担心X度那些流氓翻看我的文件了～

隆重推荐--<strong>Seafile</strong>

具体的Google一下Seafile，第一个就是它。

具体的安装过程官网上面也都有，所以，我也不在这里啰嗦。

### Share###
在这里我也分享一个shadowsocks账号，上图:

![shadowsocks](../img/shadowsocks.png)

[shadowsicks_client](../file/shadowsocks-win.zip)