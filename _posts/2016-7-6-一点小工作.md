---
layout : post
targs : code
premalink : pretty
---

前一段日子反代的谷歌被墙了，所以，不得不换个新的域名，而且这个域名还不能直接被打开（被确认为谷歌），所以，就耍了一点小聪明：

```nginx
    valid_referers kfd.me *.kfd.me server_names ~\.google\. ~\.baidu\.;
    if ($invalid_referer) {
        rewrite ^/ http://kfd.me;
    }

```

算是做了一点小小的工作，而且还挺管用的。可惜了以前每天几千UV的日子，现在只有几十了。

首先定义了一些Refer，然后服务其判断如果来源不是这些的话，就会返回到我的主站，不知道gov的那些爬虫会不会继续搞我，就先这样吧。

还有一些小东西：

```bash
sort -u -t ',' -k2,2 data
```

这条关于`sort`的命令，用来以文件的第二个字段（字段之间用‘，’分隔）排序并去重。超级好用！

之所以会用到这条命令，是我这几天在搞一些用户名密码相关的事情，以后的日子还算清闲，没有别的事情，就研究用户名和密码了。

还有一个小脚本，争取明天写个框架，是一个Telegram的机器人，放到VPS上，当监控来用。

偷懒了好久，该活动活动了。